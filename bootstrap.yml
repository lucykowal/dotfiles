- name: Bootstrap Lucy's DevEnv
  hosts: localhost

  tasks:
    # some software is needed but not managed via ansible:
    # - brew
    # - go
    # - java
    # - ruby, perl (included in mac)
    - name: Install brew packages
      community.general.homebrew:
        name:
          - bear
          - bitwarden-cli
          - composer
          - deno
          - direnv
          - fd
          - fzf
          - gh
          - git
          - gradle
          - jdtls
          - julia
          - lua
          - luajit
          - luarocks
          - maven
          - neovim
          - node
          - pandoc
          - php
          - python-setuptools
          - ripgrep
          - rust
          - stow
          - tmux
          - terraform
          - uv
          - wget
        state: present
      when: ansible_distribution == "MacOSX"
    - name: Stow configurations
      include_role:
        name: stow
      vars:
        packages:
          - editorconfig
          - tmux
          - nvim
    - name: Stow mac configurations
      include_role:
        name: stow
      vars:
        packages:
          - ghostty
      when: ansible_distribution == "MacOSX"
    - name: Stow personal configurations
      include_role:
        name: stow
      vars:
        packages:
          - git
      when: ansible_hostname == "lucybook"
    - name: Create zsh initialization scripts
      include_role:
        name: zsh
      when: ansible_distribution == "MacOSX"
